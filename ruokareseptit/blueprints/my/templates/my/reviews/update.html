{% extends 'base.html' %}
{% block title %}Arvostelun {{ review.id }} muokkaus{% endblock %}
{% block header %}<h1>Arvostelun muokkaus</h1>{% endblock %}
{% block content %}
<p>
    Tällä lomakkeella voit muokata aiemmin antamaasi arvostelua tai poistaa sen
    kokonaan. Arvostelun alapuolella näkyy se resepti jolle olet tämän arvostelun
    antanut. Reseptiä ei kuitenkaan voida näyttää, jos se on poistettu tai se ei
    ole julkaistussa tilassa.
</p>
<form class="dialog grid recipe" action="{{ submit_url }}" method="post">
    <fieldset class="control full-width flex">
        <legend>Arvosana</legend>
        <label><input type="radio" name="rating" value="1" {{ 'checked' if review.rating==1 }}>★</label>
        <label><input type="radio" name="rating" value="2" {{ 'checked' if review.rating==2 }}>★★</label>
        <label><input type="radio" name="rating" value="3" {{ 'checked' if review.rating==3 }}>★★★</label>
        <label><input type="radio" name="rating" value="4" {{ 'checked' if review.rating==4 }}>★★★★</label>
        <label><input type="radio" name="rating" value="5" {{ 'checked' if review.rating==5 }}>★★★★★</label>
    </fieldset>

    <label for="review">Arvostelu</label>
    <textarea class="control" name="review" id="review" rows="10">{{ review.review }}</textarea>

    <nav>
        <button type="submit" name="return" value="1">④ Tallenna ja palaa listaukseen</button>
        <button class="danger" type="submit" name="delete" value="1">ⓧ Poista arvostelu</button>
    </nav>
</form>
{% if review.published %}
{% include "recipes/common/recipe.html" %}
{% else %}
{% if review.title %}
<em>Et voi nähdä arvostelemaasi reseptiä. Resepti ei ole tällä hetkellä julkaistuna.</em>
{% else %}
<em>Resepti on poistettu tietokannasta arvostelusi jälkeen. Voit poistaa myös
    antamasi arvostelusi yllä olevalla lomakkeella.</em>
{% endif %}
{% endif %}
<p>
    <a href="{{ request.args.get('back', url_for('.index')) }}">&lt;&lt; Takaisin</a><br />
</p>
{% endblock %}